"""Help service for bot commands and features."""

from dataclasses import dataclass
from typing import Dict, List, Optional

# from app.auth.authorization import require_admin, safe_user_operation


@dataclass
class CommandInfo:
    """Information about a bot command."""

    command: str
    description: str
    usage: str = ""
    examples: Optional[List[str]] = None
    admin_only: bool = False


class HelpService:
    """Service for managing help information."""

    def __init__(self):
        self.commands = self._initialize_commands()

    def _initialize_commands(self) -> Dict[str, CommandInfo]:
        """Initialize all available commands."""
        return {
            "start": CommandInfo(
                command="/start",
                description="–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ",
                usage="/start",
                examples=["/start"],
                admin_only=False,
            ),
            "help": CommandInfo(
                command="/help",
                description="–°–ø—Ä–∞–≤–∫–∞ –ø–æ –≤—Å–µ–º –∫–æ–º–∞–Ω–¥–∞–º",
                usage="/help [–∫–∞—Ç–µ–≥–æ—Ä–∏—è]",
                examples=["/help", "/help admin", "/help channels"],
                admin_only=False,
            ),
            "status": CommandInfo(
                command="/status",
                description="–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞",
                usage="/status",
                examples=["/status"],
                admin_only=True,
            ),
            "channels": CommandInfo(
                command="/channels",
                description="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞–º–∏",
                usage="/channels",
                examples=["/channels"],
                admin_only=True,
            ),
            "bots": CommandInfo(
                command="/bots",
                description="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏",
                usage="/bots",
                examples=["/bots"],
                admin_only=True,
            ),
            "suspicious": CommandInfo(
                command="/suspicious",
                description="–ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π",
                usage="/suspicious",
                examples=["/suspicious"],
                admin_only=True,
            ),
            "reset_suspicious": CommandInfo(
                command="/reset_suspicious",
                description="–°–±—Ä–æ—Å —Å—Ç–∞—Ç—É—Å–æ–≤ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π",
                usage="/reset_suspicious",
                examples=["/reset_suspicious"],
                admin_only=True,
            ),
            "recalculate_suspicious": CommandInfo(
                command="/recalculate_suspicious",
                description="–ü–µ—Ä–µ—Å—á–µ—Ç –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π —Å –Ω–æ–≤—ã–º–∏ –≤–µ—Å–∞–º–∏",
                usage="/recalculate_suspicious",
                examples=["/recalculate_suspicious"],
                admin_only=True,
            ),
            "cleanup_duplicates": CommandInfo(
                command="/cleanup_duplicates",
                description="–£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π",
                usage="/cleanup_duplicates",
                examples=["/cleanup_duplicates"],
                admin_only=True,
            ),
            "setlimit": CommandInfo(
                command="/setlimit",
                description="–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã",
                usage="/setlimit <—Ç–∏–ø> <–∑–Ω–∞—á–µ–Ω–∏–µ>",
                examples=["/setlimit messages 15", "/setlimit threshold 0.3"],
                admin_only=True,
            ),
            "reload_limits": CommandInfo(
                command="/reload_limits",
                description="–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –∏–∑ —Ñ–∞–π–ª–∞",
                usage="/reload_limits",
                examples=["/reload_limits"],
                admin_only=True,
            ),
            "settings": CommandInfo(
                command="/settings",
                description="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞",
                usage="/settings",
                examples=["/settings"],
                admin_only=True,
            ),
            "logs": CommandInfo(
                command="/logs",
                description="–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤",
                usage="/logs [—É—Ä–æ–≤–µ–Ω—å]",
                examples=["/logs", "/logs error"],
                admin_only=True,
            ),
        }

    def get_main_help(self, is_admin: bool = False) -> str:
        """Get main help text."""
        help_text = (
            "ü§ñ <b>AntiSpam Bot - –°–ø—Ä–∞–≤–∫–∞</b>\n\n"
            "–≠—Ç–æ—Ç –±–æ—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∫–∞–Ω–∞–ª–æ–≤ –∏ –∑–∞—â–∏—Ç—ã –æ—Ç —Å–ø–∞–º–∞.\n\n"
        )

        if is_admin:
            help_text += self._get_admin_commands()
        else:
            help_text += self._get_user_commands()

        help_text += (
            "\nüìñ <b>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</b>\n"
            "‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /help [–∫–∞—Ç–µ–≥–æ—Ä–∏—è] –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π —Å–ø—Ä–∞–≤–∫–∏\n"
            "‚Ä¢ –í—Å–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö\n"
            "‚Ä¢ –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É\n\n"
            "üîó <b>–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:</b>\n"
            "‚Ä¢ GitHub: https://github.com/your-repo\n"
            "‚Ä¢ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://docs.example.com\n"
            "‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞: @your_support"
        )

        return help_text

    def get_category_help(self, category: str, user_id: Optional[int] = None) -> str:
        """Get help for specific category."""
        from app.auth.authorization import AuthorizationService

        category = category.lower()

        # Use proper authorization service instead of client-side check
        auth_service = AuthorizationService()
        is_admin = auth_service.is_admin(user_id) if user_id else False

        if category == "admin":
            if not is_admin:
                return "‚ùå –£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏."
            return self._get_admin_commands_detailed()

        elif category == "channels":
            return self._get_channels_help()

        elif category == "bots":
            return self._get_bots_help()

        elif category == "moderation":
            return self._get_moderation_help()

        elif category == "user":
            return self._get_user_commands_detailed()

        else:
            return (
                "‚ùì <b>–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–ø—Ä–∞–≤–∫–∏:</b>\n\n"
                "‚Ä¢ <b>admin</b> - –∫–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞\n"
                "‚Ä¢ <b>channels</b> - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞–º–∏\n"
                "‚Ä¢ <b>bots</b> - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏\n"
                "‚Ä¢ <b>moderation</b> - –º–æ–¥–µ—Ä–∞—Ü–∏—è\n"
                "‚Ä¢ <b>user</b> - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã\n\n"
                "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ: /help [–∫–∞—Ç–µ–≥–æ—Ä–∏—è]"
            )

    def _get_admin_commands(self) -> str:
        """Get admin commands list."""
        commands_text = "üëë <b>–ö–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:</b>\n"

        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ self.commands
        for command_key, command_info in self.commands.items():
            if command_info.admin_only:
                commands_text += f"{command_info.command} - {command_info.description}\n"

        commands_text += "\n"
        return commands_text

    def _get_user_commands(self) -> str:
        """Get user commands list."""
        return (
            "üë§ <b>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã:</b>\n"
            "/start - –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é\n"
            "/help - —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º\n\n"
        )

    def _get_admin_commands_detailed(self) -> str:
        """Get detailed admin commands help."""
        return (
            "üëë <b>–ö–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</b>\n\n"
            "<b>üìä /status</b>\n"
            "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞:\n"
            "‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–Ω–∞–ª–æ–≤ (—Ä–∞–∑—Ä–µ—à–µ–Ω—ã/–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã)\n"
            "‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–æ—Ç–æ–≤ –≤ whitelist\n"
            "‚Ä¢ –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã\n\n"
            "<b>üì∫ /channels</b>\n"
            "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞–º–∏:\n"
            "‚Ä¢ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –∫–∞–Ω–∞–ª–æ–≤\n"
            "‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ whitelist\n"
            "‚Ä¢ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –∫–∞–Ω–∞–ª–∞–º\n\n"
            "<b>ü§ñ /bots</b>\n"
            "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏:\n"
            "‚Ä¢ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –±–æ—Ç–æ–≤\n"
            "‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ whitelist –±–æ—Ç–æ–≤\n"
            "‚Ä¢ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –±–æ—Ç–∞–º\n\n"
            "<b>üîç /suspicious</b>\n"
            "–ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏:\n"
            "‚Ä¢ –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤\n"
            "‚Ä¢ –ê–Ω–∞–ª–∏–∑ –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π\n"
            "‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏\n"
            "‚Ä¢ –ö–Ω–æ–ø–∫–∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ (–∑–∞–±–∞–Ω–∏—Ç—å/–Ω–∞–±–ª—é–¥–∞—Ç—å/—Ä–∞–∑—Ä–µ—à–∏—Ç—å)\n\n"
            "<b>üîÑ /reset_suspicious</b>\n"
            "–°–±—Ä–æ—Å —Å—Ç–∞—Ç—É—Å–æ–≤ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π:\n"
            "‚Ä¢ –°–±—Ä–æ—Å —Å—Ç–∞—Ç—É—Å–∞ '–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ' –Ω–∞ '–æ–∂–∏–¥–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏'\n"
            "‚Ä¢ –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª–∏\n"
            "‚Ä¢ –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã\n\n"
            "<b>üìä /recalculate_suspicious</b>\n"
            "–ü–µ—Ä–µ—Å—á–µ—Ç –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π:\n"
            "‚Ä¢ –ü—Ä–∏–º–µ–Ω—è–µ—Ç –Ω–æ–≤—ã–µ –≤–µ—Å–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤\n"
            "‚Ä¢ –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—á–µ—Ç –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏\n"
            "‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞\n\n"
            "<b>üßπ /cleanup_duplicates</b>\n"
            "–û—á–∏—Å—Ç–∫–∞ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π:\n"
            "‚Ä¢ –£–¥–∞–ª—è–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏\n"
            "‚Ä¢ –û—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ —Å–∞–º—ã–π —Å–≤–µ–∂–∏–π –ø—Ä–æ—Ñ–∏–ª—å\n"
            "‚Ä¢ –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç –æ—à–∏–±–∫–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö\n\n"
            "<b>‚öôÔ∏è /settings</b>\n"
            "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞:\n"
            "‚Ä¢ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤\n"
            "‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π\n"
            "‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏\n\n"
            "<b>üìã /logs</b>\n"
            "–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:\n"
            "‚Ä¢ /logs - –≤—Å–µ –ª–æ–≥–∏\n"
            "‚Ä¢ /logs error - —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏\n"
            "‚Ä¢ /logs warning - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –æ—à–∏–±–∫–∏\n"
        )

    def _get_channels_help(self) -> str:
        """Get channels management help."""
        return (
            "üì∫ <b>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞–º–∏</b>\n\n"
            "–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –∫–∞–Ω–∞–ª–æ–≤ –∏ —É–≤–µ–¥–æ–º–ª—è–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.\n\n"
            "<b>üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:</b>\n"
            "–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –Ω–æ–≤–æ–≥–æ –∫–∞–Ω–∞–ª–∞ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏:\n"
            "‚Ä¢ ‚úÖ <b>–†–∞–∑—Ä–µ—à–∏—Ç—å</b> - –¥–æ–±–∞–≤–∏—Ç—å –∫–∞–Ω–∞–ª –≤ whitelist\n"
            "‚Ä¢ üö´ <b>–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å</b> - –¥–æ–±–∞–≤–∏—Ç—å –∫–∞–Ω–∞–ª –≤ blacklist\n"
            "‚Ä¢ üóë <b>–£–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</b> - —É–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ\n"
            "‚Ä¢ üëÅ <b>–ü—Ä–æ—Å–º–æ—Ç—Ä</b> - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏—è\n\n"
            "<b>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞–Ω–∞–ª–æ–≤:</b>\n"
            "‚Ä¢ –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–Ω–∞–ª–æ–≤\n"
            "‚Ä¢ –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã\n"
            "‚Ä¢ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã\n"
            "‚Ä¢ –ö–∞–Ω–∞–ª—ã –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏\n\n"
            "<b>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏:</b>\n"
            "‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤\n"
            "‚Ä¢ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º\n"
            "‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π"
        )

    def _get_bots_help(self) -> str:
        """Get bots management help."""
        return (
            "ü§ñ <b>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏</b>\n\n"
            "–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç –¥—Ä—É–≥–∏—Ö –±–æ—Ç–æ–≤, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ whitelist.\n\n"
            "<b>üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –±–æ—Ç–æ–≤:</b>\n"
            "‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –±–æ—Ç–æ–≤\n"
            "‚Ä¢ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –±–æ—Ç–æ–≤\n"
            "‚Ä¢ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –±–æ—Ç–∞—Ö\n\n"
            "<b>üìã Whitelist –±–æ—Ç–æ–≤:</b>\n"
            "‚Ä¢ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –±–æ—Ç–æ–≤\n"
            "‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–≤ –≤ whitelist\n"
            "‚Ä¢ –£–¥–∞–ª–µ–Ω–∏–µ –±–æ—Ç–æ–≤ –∏–∑ whitelist\n"
            "‚Ä¢ –ú–∞—Å—Å–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ\n\n"
            "<b>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</b>\n"
            "‚Ä¢ –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–æ—Ç–æ–≤\n"
            "‚Ä¢ –ë–æ—Ç—ã –≤ whitelist\n"
            "‚Ä¢ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–æ—Ç—ã\n"
            "‚Ä¢ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –±–æ—Ç–æ–≤\n\n"
            "<b>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏:</b>\n"
            "‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ whitelist\n"
            "‚Ä¢ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É –±–æ—Ç–∞\n"
            "‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π"
        )

    def _get_moderation_help(self) -> str:
        """Get moderation help."""
        return (
            "üõ°Ô∏è <b>–°–∏—Å—Ç–µ–º–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</b>\n\n"
            "–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.\n\n"
            "<b>üîç –ê–Ω–∞–ª–∏–∑ —Å–æ–æ–±—â–µ–Ω–∏–π:</b>\n"
            "‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Å—ã–ª–æ–∫ –Ω–∞ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–µ —Å–∞–π—Ç—ã\n"
            "‚Ä¢ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Å–ø–∞–º–∞ –∏ —Ä–µ–∫–ª–∞–º—ã\n"
            "‚Ä¢ –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã\n"
            "‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤\n\n"
            "<b>üë§ –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ñ–∏–ª–µ–π:</b>\n"
            "‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞ –∞–∫–∫–∞—É–Ω—Ç–∞\n"
            "‚Ä¢ –ê–Ω–∞–ª–∏–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n"
            "‚Ä¢ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤\n"
            "‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞ –∏ –æ–ø–∏—Å–∞–Ω–∏—è\n\n"
            "<b>‚ö° –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:</b>\n"
            "‚Ä¢ –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π\n"
            "‚Ä¢ –í—Ä–µ–º–µ–Ω–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π\n"
            "‚Ä¢ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤\n"
            "‚Ä¢ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π\n\n"
            "<b>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏:</b>\n"
            "‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π\n"
            "‚Ä¢ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º –Ω–∞—Ä—É—à–µ–Ω–∏–π\n"
            "‚Ä¢ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä–æ–≤\n"
            "‚Ä¢ –û—Ç—á–µ—Ç—ã –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º"
        )

    def _get_user_commands_detailed(self) -> str:
        """Get detailed user commands help."""
        return (
            "üë§ <b>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã</b>\n\n"
            "<b>üöÄ /start</b>\n"
            "–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –∏ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:\n"
            "‚Ä¢ –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ\n"
            "‚Ä¢ –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥\n"
            "‚Ä¢ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ\n\n"
            "<b>‚ùì /help</b>\n"
            "–°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º:\n"
            "‚Ä¢ /help - –æ–±—â–∞—è —Å–ø—Ä–∞–≤–∫–∞\n"
            "‚Ä¢ /help [–∫–∞—Ç–µ–≥–æ—Ä–∏—è] - —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏\n"
            "‚Ä¢ –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: admin, channels, bots, moderation\n\n"
            "<b>‚ÑπÔ∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</b>\n"
            "‚Ä¢ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ\n"
            "‚Ä¢ –í—Å–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö\n"
            "‚Ä¢ –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É"
        )

    def get_command_info(self, command: str) -> Optional[CommandInfo]:
        """Get information about specific command."""
        return self.commands.get(command.lstrip("/"), None)

    def get_all_commands(self, admin_only: bool = False) -> List[CommandInfo]:
        """Get all commands, optionally filtered by admin status."""
        if admin_only:
            return [cmd for cmd in self.commands.values() if cmd.admin_only]
        return list(self.commands.values())
