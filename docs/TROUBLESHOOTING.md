# üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–µ—à–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º —Å AntiSpam Bot.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–±—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã](#–æ–±—â–∏–µ-–ø—Ä–æ–±–ª–µ–º—ã)
- [–ü—Ä–æ–±–ª–µ–º—ã —Å –∫–∞–Ω–∞–ª–∞–º–∏](#–ø—Ä–æ–±–ª–µ–º—ã-—Å-–∫–∞–Ω–∞–ª–∞–º–∏)
- [–ü—Ä–æ–±–ª–µ–º—ã —Å –ª–æ–≥–∞–º–∏](#–ø—Ä–æ–±–ª–µ–º—ã-—Å-–ª–æ–≥–∞–º–∏)
- [–ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø—Ä–æ—Ñ–∏–ª—è–º–∏](#–ø—Ä–æ–±–ª–µ–º—ã-—Å-–ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–º–∏-–ø—Ä–æ—Ñ–∏–ª—è–º–∏)
- [–ü—Ä–æ–±–ª–µ–º—ã —Å –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π](#–ø—Ä–æ–±–ª–µ–º—ã-—Å-–º–æ–¥–µ—Ä–∞—Ü–∏–µ–π)
- [–ü—Ä–æ–±–ª–µ–º—ã —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π](#–ø—Ä–æ–±–ª–µ–º—ã-—Å-—É—Å—Ç–∞–Ω–æ–≤–∫–æ–π)
- [–ü—Ä–æ–±–ª–µ–º—ã —Å Docker](#–ø—Ä–æ–±–ª–µ–º—ã-—Å-docker)
- [–ü—Ä–æ–±–ª–µ–º—ã —Å systemd](#–ø—Ä–æ–±–ª–µ–º—ã-—Å-systemd)

## üîç –û–±—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—ã

#### –°–∏–º–ø—Ç–æ–º—ã
- –ö–æ–º–∞–Ω–¥—ã –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è
- –ù–µ—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç –±–æ—Ç–∞
- –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö

#### –†–µ—à–µ–Ω–∏—è
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞:**
   ```bash
   sudo systemctl status antispam-bot.service
   ```

2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:**
   ```bash
   sudo systemctl restart antispam-bot.service
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   sudo journalctl -u antispam-bot.service -f
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `.env` —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å `BOT_TOKEN`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `ADMIN_IDS`

### –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö

#### –°–∏–º–ø—Ç–æ–º—ã
- –û—à–∏–±–∫–∏ –≤ systemd –ª–æ–≥–∞—Ö
- –ò—Å–∫–ª—é—á–µ–Ω–∏—è –≤ –∫–æ–¥–µ
- –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

#### –†–µ—à–µ–Ω–∏—è
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   sudo journalctl -u antispam-bot.service --since "1 hour ago"
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
   ```bash
   sudo chown -R antispam:antispam /opt/antispam-bot
   sudo chmod -R 755 /opt/antispam-bot
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env` –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç `ADMIN_IDS` (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DB_PATH`

## üì∫ –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–∞–Ω–∞–ª–∞–º–∏

### –ë–æ—Ç –Ω–µ –º–æ–¥–µ—Ä–∞—Ç–∏—Ä—É–µ—Ç –≤ –∫–∞–Ω–∞–ª–µ

#### –°–∏–º–ø—Ç–æ–º—ã
- –°–ø–∞–º –Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è
- –ù–µ—Ç —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

#### –†–µ—à–µ–Ω–∏—è
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –±–æ—Ç–∞:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞: —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞: –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–æ–±—â–µ–Ω–∏–π

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–∞–Ω–∞–ª–∞:**
   ```
   /channels
   ```
   - –ö–∞–Ω–∞–ª –¥–æ–ª–∂–µ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∫–∞–∫ "–ù–∞—Ç–∏–≤–Ω—ã–π"
   - –ï—Å–ª–∏ "–ò–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–π" - –¥–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –∫–∞–∫ –∞–¥–º–∏–Ω–∞

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞–Ω–∞–ª –≤ `NATIVE_CHANNEL_IDS`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ—Ç –Ω–µ –≤ blacklist

### –ö–∞–Ω–∞–ª –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–π

#### –°–∏–º–ø—Ç–æ–º—ã
- –í `/channels` –∫–∞–Ω–∞–ª –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ "–ò–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–π"
- –ë–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –º–æ–¥–µ—Ä–∞—Ç–∏—Ä–æ–≤–∞—Ç—å
- –ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Å—Ç—Ä–æ–≥–∏–µ –ø—Ä–∞–≤–∏–ª–∞

#### –†–µ—à–µ–Ω–∏—è
1. **–î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:**
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–Ω–∞–ª–∞ ‚Üí –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã
   - –î–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞
   - –í–∫–ª—é—á–∏—Ç—å –ø—Ä–∞–≤–∞: —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –∏–º–µ–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ—Ç –Ω–µ –±—ã–ª —É–¥–∞–ª–µ–Ω

3. **–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ç—É—Å:**
   - –í—ã–ø–æ–ª–Ω–∏—Ç–µ `/channels` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
   - –ö–∞–Ω–∞–ª –¥–æ–ª–∂–µ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∫–∞–∫ "–ù–∞—Ç–∏–≤–Ω—ã–π"

### –î—É–±–ª–∏—Ä—É—é—â–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

#### –°–∏–º–ø—Ç–æ–º—ã
- –ü–æ–ª—É—á–∞–µ—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–± –æ–¥–Ω–æ–º —Å–æ–±—ã—Ç–∏–∏
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏/—É–¥–∞–ª–µ–Ω–∏–∏ –±–æ—Ç–∞ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è

#### –†–µ—à–µ–Ω–∏—è
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `NOTIFICATION_WEBHOOK` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö webhook'–æ–≤

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   - –ù–∞–π–¥–∏—Ç–µ –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –ª–æ–≥–∞—Ö
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑

## üìä –ü—Ä–æ–±–ª–µ–º—ã —Å –ª–æ–≥–∞–º–∏

### –ö–æ–º–∞–Ω–¥–∞ `/logs` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

#### –°–∏–º–ø—Ç–æ–º—ã
- –ö–æ–º–∞–Ω–¥–∞ `/logs` –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- –û—à–∏–±–∫–∞ "journalctl not found"
- –ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç

#### –†–µ—à–µ–Ω–∏—è
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ systemd:**
   ```bash
   sudo systemctl status antispam-bot.service
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ journalctl:**
   ```bash
   which journalctl
   sudo journalctl --version
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–æ—Ç–∞ –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å –ª–æ–≥–∏
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ `/var/log/journal`

4. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏:**
   - –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ —Ñ–∞–π–ª—ã –ª–æ–≥–æ–≤
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª—ã –≤ `/var/log/antispam-bot.log`

### –õ–æ–≥–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

#### –°–∏–º–ø—Ç–æ–º—ã
- –õ–æ–≥–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ systemd journal
- –§–∞–π–ª—ã –ª–æ–≥–æ–≤ –ø—É—Å—Ç—ã–µ
- –ù–µ—Ç –∑–∞–ø–∏—Å–µ–π –æ —Ä–∞–±–æ—Ç–µ –±–æ—Ç–∞

#### –†–µ—à–µ–Ω–∏—è
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `LOG_LEVEL` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞:**
   ```bash
   sudo chown -R antispam:antispam /var/log/antispam-bot.log
   sudo chmod 644 /var/log/antispam-bot.log
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ systemd unit:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `StandardOutput=journal`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `StandardError=journal`

## üîç –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø—Ä–æ—Ñ–∏–ª—è–º–∏

### –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π

#### –°–∏–º–ø—Ç–æ–º—ã
- –ú–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ
- –ù–æ—Ä–º–∞–ª—å–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ —Å–ø–∏—Å–æ–∫
- –í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π

#### –†–µ—à–µ–Ω–∏—è
1. **–£–≤–µ–ª–∏—á—å—Ç–µ –ø–æ—Ä–æ–≥ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
   ```
   /setlimit threshold 0.5
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Å–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ `app/services/profiles.py`
   - –£–º–µ–Ω—å—à–∏—Ç–µ –≤–µ—Å–∞ –¥–ª—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–∞—é—Ç –º–Ω–æ–≥–æ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ—Å—á–µ—Ç:**
   ```
   /recalculate_suspicious
   ```

### –ù–µ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏

#### –°–∏–º–ø—Ç–æ–º—ã
- –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏ –Ω–µ –ø–æ–º–µ—á–∞—é—Ç—Å—è
- –ù–∏–∑–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è
- –°–∏—Å—Ç–µ–º–∞ –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ —è–≤–Ω—ã—Ö –±–æ—Ç–æ–≤

#### –†–µ—à–µ–Ω–∏—è
1. **–£–º–µ–Ω—å—à–∏—Ç–µ –ø–æ—Ä–æ–≥ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
   ```
   /setlimit threshold 0.3
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–Ω–∞–ª–∏–∑–∞:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ñ–∏–ª–µ–π –≤–∫–ª—é—á–µ–Ω
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ middleware —Ä–∞–±–æ—Ç–∞–µ—Ç

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ—Å—á–µ—Ç:**
   ```
   /recalculate_suspicious
   ```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–µ—Ä–µ—Å—á–µ—Ç–æ–º

#### –°–∏–º–ø—Ç–æ–º—ã
- –ö–æ–º–∞–Ω–¥–∞ `/recalculate_suspicious` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –û—à–∏–±–∫–∏ –ø—Ä–∏ –ø–µ—Ä–µ—Å—á–µ—Ç–µ
- –ù–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –Ω–æ–≤—ã–µ –≤–µ—Å–∞

#### –†–µ—à–µ–Ω–∏—è
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   sudo journalctl -u antispam-bot.service -f
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω–∞
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:**
   ```bash
   sudo systemctl restart antispam-bot.service
   ```

## üö´ –ü—Ä–æ–±–ª–µ–º—ã —Å –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π

### –ë–∞–Ω—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

#### –°–∏–º–ø—Ç–æ–º—ã
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è
- –û—à–∏–±–∫–∏ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –±–∞–Ω–∞
- –°–æ–æ–±—â–µ–Ω–∏—è –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è

#### –†–µ—à–µ–Ω–∏—è
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –±–æ—Ç–∞:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é:**
   ```
   /sync_bans
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   - –ù–∞–π–¥–∏—Ç–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –±–∞–Ω–∞
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ API —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –°–æ–æ–±—â–µ–Ω–∏—è –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è

#### –°–∏–º–ø—Ç–æ–º—ã
- –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Å—Ç–∞—é—Ç—Å—è
- –û—à–∏–±–∫–∏ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏
- –ù–µ—Ç —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Å–ø–∞–º

#### –†–µ—à–µ–Ω–∏—è
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –±–æ—Ç–∞:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –º–æ–∂–µ—Ç —É–¥–∞–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∞–Ω—Ç–∏—Å–ø–∞–º –≤–∫–ª—é—á–µ–Ω
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã –∏ –ø–æ—Ä–æ–≥–∏

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   - –ù–∞–π–¥–∏—Ç–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

## üèóÔ∏è –ü—Ä–æ–±–ª–µ–º—ã —Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π

### –°–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

#### –°–∏–º–ø—Ç–æ–º—ã
- –û—à–∏–±–∫–∏ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ `install.sh`
- –°–∫—Ä–∏–ø—Ç –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è
- –ù–µ –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è

#### –†–µ—à–µ–Ω–∏—è
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞:**
   ```bash
   chmod +x install.sh
   sudo bash install.sh
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –ø–∞–∫–µ—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ —Ä–µ–∂–∏–º–µ –æ—Ç–ª–∞–¥–∫–∏:**
   ```bash
   bash -x install.sh
   ```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

#### –°–∏–º–ø—Ç–æ–º—ã
- `.env` —Ñ–∞–π–ª –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

#### –†–µ—à–µ–Ω–∏—è
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞:**
   ```bash
   sudo chown -R antispam:antispam /opt/antispam-bot
   sudo chmod 600 /opt/antispam-bot/.env
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `.env` —Ñ–∞–π–ª –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤

3. **–ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   ```bash
   sudo -u antispam /opt/antispam-bot/venv/bin/python -c "
   from app.config import load_config
   config = load_config()
   print('Config loaded successfully')
   "
   ```

## üê≥ –ü—Ä–æ–±–ª–µ–º—ã —Å Docker

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

#### –°–∏–º–ø—Ç–æ–º—ã
- Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç
- –û—à–∏–±–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- –ù–µ—Ç –ª–æ–≥–æ–≤

#### –†–µ—à–µ–Ω–∏—è
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   docker logs antispam-bot
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `.env` —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω—ã

3. **–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑:**
   ```bash
   docker-compose down
   docker-compose build --no-cache
   docker-compose up -d
   ```

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é

#### –°–∏–º–ø—Ç–æ–º—ã
- –ë–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Telegram
- –û—à–∏–±–∫–∏ —Å–µ—Ç–∏
- –¢–∞–π–º–∞—É—Ç—ã

#### –†–µ—à–µ–Ω–∏—è
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç—å:**
   ```bash
   docker exec antispam-bot ping api.telegram.org
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS:**
   ```bash
   docker exec antispam-bot nslookup api.telegram.org
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ UFW

## ‚öôÔ∏è –ü—Ä–æ–±–ª–µ–º—ã —Å systemd

### –°–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

#### –°–∏–º–ø—Ç–æ–º—ã
- `systemctl start antispam-bot` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –û—à–∏–±–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- –°–µ—Ä–≤–∏—Å –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω

#### –†–µ—à–µ–Ω–∏—è
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:**
   ```bash
   sudo systemctl status antispam-bot.service
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   sudo journalctl -u antispam-bot.service
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ unit —Ñ–∞–π–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º

### –°–µ—Ä–≤–∏—Å –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

#### –°–∏–º–ø—Ç–æ–º—ã
- `systemctl restart` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –°–µ—Ä–≤–∏—Å –∑–∞–≤–∏—Å–∞–µ—Ç
- –ù–µ—Ç —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –∫–æ–º–∞–Ω–¥—ã

#### –†–µ—à–µ–Ω–∏—è
1. **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞:**
   ```bash
   sudo systemctl stop antispam-bot.service
   sudo pkill -f antispam-bot
   ```

2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫:**
   ```bash
   sudo systemctl start antispam-bot.service
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª—ã

## üìû –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

### –°–±–æ—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –æ—Ç—á–µ—Ç–∞

1. **–°–æ–±–µ—Ä–∏—Ç–µ –ª–æ–≥–∏:**
   ```bash
   sudo journalctl -u antispam-bot.service --since "1 hour ago" > logs.txt
   ```

2. **–°–æ–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   ```bash
   cat /opt/antispam-bot/.env > config.txt
   ```

3. **–°–æ–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã:**
   ```bash
   systemctl status antispam-bot.service > status.txt
   ```

### –°–æ–∑–¥–∞–Ω–∏–µ Issue

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Issue –≤–∫–ª—é—á–∏—Ç–µ:
- –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
- –®–∞–≥–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- –õ–æ–≥–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–∏—Å—Ç–µ–º–µ

### –ö–æ–Ω—Ç–∞–∫—Ç—ã

- **GitHub Issues:** [–°–æ–∑–¥–∞—Ç—å Issue](../../issues)
- **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** @ncux_ad
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [docs/](docs/)

---

**–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –∑–∞—â–∏—Ç—ã Telegram —Å–æ–æ–±—â–µ—Å—Ç–≤**