# üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ AntiSpam Bot

–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ AntiSpam Bot –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **–û–°**: Ubuntu 20.04+ / Debian 11+ / CentOS 8+
- **RAM**: –ú–∏–Ω–∏–º—É–º 512MB, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 1GB+
- **–î–∏—Å–∫**: –ú–∏–Ω–∏–º—É–º 2GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
- **–°–µ—Ç—å**: –î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É, –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã 80 –∏ 443

### –î–æ–º–µ–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **–î–æ–º–µ–Ω**: –î–µ–π—Å—Ç–≤—É—é—â–∏–π –¥–æ–º–µ–Ω, —É–∫–∞–∑—ã–≤–∞—é—â–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- **DNS**: A –∑–∞–ø–∏—Å—å –¥–ª—è –¥–æ–º–µ–Ω–∞ –∏ www –ø–æ–¥–¥–æ–º–µ–Ω–∞
- **Email**: –í–∞–ª–∏–¥–Ω—ã–π email –¥–ª—è Let's Encrypt

## üéØ –í–∞—Ä–∏–∞–Ω—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### 1. üê≥ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **–ü–ª—é—Å—ã**: –ü—Ä–æ—Å—Ç–æ—Ç–∞, –∏–∑–æ–ª—è—Ü–∏—è, –ª–µ–≥–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- **–ú–∏–Ω—É—Å—ã**: –ë–æ–ª—å—à–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è**: –ü—Ä–æ–¥–∞–∫—à–µ–Ω–∞, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 2. ‚öôÔ∏è systemd (–ø—Ä—è–º–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- **–ü–ª—é—Å—ã**: –ú–µ–Ω—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤, –±–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è
- **–ú–∏–Ω—É—Å—ã**: –°–ª–æ–∂–Ω–µ–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è**: VPS, –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤

## üöÄ –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫
git clone https://github.com/your-repo/antispam-bot.git
cd antispam-bot
sudo bash install.sh
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ Makefile
```bash
# Docker —É—Å—Ç–∞–Ω–æ–≤–∫–∞
make install-docker

# systemd —É—Å—Ç–∞–Ω–æ–≤–∫–∞
make install-systemd
```

## üìñ –ü–æ–¥—Ä–æ–±–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
```bash
sudo apt update && sudo apt upgrade -y
```

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∞–∑–æ–≤—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
```bash
sudo apt install -y curl wget git unzip htop nano vim
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS

#### A –∑–∞–ø–∏—Å–∏
```
your-domain.com    A    YOUR_SERVER_IP
www.your-domain.com A    YOUR_SERVER_IP
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS
```bash
nslookup your-domain.com
dig your-domain.com
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ Docker

#### –ó–∞–ø—É—Å–∫ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
```bash
sudo bash scripts/install-docker.sh
```

#### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∏ Docker Compose
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
3. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞
4. –°–æ–∑–¥–∞–Ω–∏–µ systemd —Å–µ—Ä–≤–∏—Å–∞
5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Let's Encrypt
6. –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

### 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ systemd

#### –ó–∞–ø—É—Å–∫ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
```bash
sudo bash scripts/install-systemd.sh
```

#### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Redis
3. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ nginx
5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Let's Encrypt
6. –°–æ–∑–¥–∞–Ω–∏–µ systemd —Å–µ—Ä–≤–∏—Å–∞

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### Docker (.env.prod)
```bash
DOMAIN=your-domain.com
EMAIL=your-email@example.com
BOT_TOKEN=your_telegram_bot_token
ADMIN_IDS=123456789,987654321
DB_PATH=db.sqlite3
REDIS_PASSWORD=your_redis_password
NOTIFICATION_WEBHOOK=
RENEWAL_THRESHOLD=30
```

#### systemd (/etc/antispam-bot/.env)
```bash
BOT_TOKEN=your_telegram_bot_token
ADMIN_IDS=123456789,987654321
DB_PATH=/opt/antispam-bot/db.sqlite3
REDIS_PASSWORD=your_redis_password
NOTIFICATION_WEBHOOK=
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞

#### –ü–æ–ª—É—á–µ–Ω–∏–µ Bot Token
1. –ù–∞–ø–∏—à–∏—Ç–µ @BotFather –≤ Telegram
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞: `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Admin IDs
1. –ù–∞–ø–∏—à–∏—Ç–µ @userinfobot –≤ Telegram
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à ID
3. –î–æ–±–∞–≤—å—Ç–µ –≤ ADMIN_IDS

## üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### –ß–µ—Ä–µ–∑ Makefile
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞
make install-docker
make install-systemd

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
make bot-start
make bot-stop
make bot-restart
make bot-status
make bot-logs

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
make update

# –£–¥–∞–ª–µ–Ω–∏–µ
make uninstall
```

#### –ß–µ—Ä–µ–∑ systemd
```bash
# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º
sudo antispam-bot start
sudo antispam-bot stop
sudo antispam-bot restart
sudo antispam-bot status
sudo antispam-bot logs

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
sudo antispam-bot update
```

#### –ß–µ—Ä–µ–∑ Docker
```bash
# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
cd /opt/antispam-bot
docker-compose -f docker-compose.prod.yml up -d
docker-compose -f docker-compose.prod.yml down
docker-compose -f docker-compose.prod.yml logs -f
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
sudo antispam-bot status

# –õ–æ–≥–∏
sudo antispam-bot logs

# Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker ps
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
```bash
# systemd –ª–æ–≥–∏
journalctl -u antispam-bot -f

# Docker –ª–æ–≥–∏
docker-compose -f docker-compose.prod.yml logs -f

# –§–∞–π–ª–æ–≤—ã–µ –ª–æ–≥–∏
tail -f /var/log/antispam-bot/*.log
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
sudo bash scripts/update.sh check

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
sudo bash scripts/update.sh update

# –ò–ª–∏ —á–µ—Ä–µ–∑ Makefile
make update
```

### –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```bash
# Docker
cd /opt/antispam-bot
git pull origin main
docker-compose -f docker-compose.prod.yml up -d --build

# systemd
cd /opt/antispam-bot
git pull origin main
/opt/antispam-bot/venv/bin/pip install -r requirements.txt
sudo systemctl restart antispam-bot
```

## üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ

### –ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
```bash
sudo bash scripts/uninstall.sh
```

### –ß—Ç–æ —É–¥–∞–ª—è–µ—Ç—Å—è:
- –í—Å–µ —Ñ–∞–π–ª—ã –±–æ—Ç–∞
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- –õ–æ–≥–∏
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- systemd —Å–µ—Ä–≤–∏—Å—ã
- Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º—ã —Å DNS
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS
nslookup your-domain.com
dig your-domain.com

# –ü—Ä–æ–≤–µ—Ä–∫–∞ IP
curl ifconfig.me
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ—Ä—Ç–∞–º–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
netstat -tuln | grep -E ":80|:443"

# –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ—Ä—Ç–æ–≤
sudo ufw allow 80
sudo ufw allow 443
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
sudo antispam-bot logs

# –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
sudo certbot renew
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å Docker
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker ps -a

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose -f docker-compose.prod.yml restart

# –û—á–∏—Å—Ç–∫–∞
docker system prune -f
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
```bash
# CPU –∏ –ø–∞–º—è—Ç—å
htop

# –î–∏—Å–∫
df -h

# –°–µ—Ç—å
netstat -i
```

### –õ–æ–≥–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```bash
# Nginx –ª–æ–≥–∏
tail -f /var/log/nginx/access.log

# Docker –ª–æ–≥–∏
docker-compose -f docker-compose.prod.yml logs nginx
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞
```bash
# –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞
sudo ufw default deny incoming
sudo ufw default allow outgoing
sudo ufw allow ssh
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw enable
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ fail2ban
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status fail2ban

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö IP
sudo fail2ban-client status sshd
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤
sudo apt update && sudo apt upgrade -y

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
sudo apt install unattended-upgrades
sudo dpkg-reconfigure unattended-upgrades
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
sudo systemctl status antispam-bot*

# –õ–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
sudo journalctl -u antispam-bot* -f

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo nginx -t
sudo docker-compose -f docker-compose.prod.yml config
```

### –ö–æ–Ω—Ç–∞–∫—Ç—ã
- **GitHub Issues**: [–°–æ–∑–¥–∞—Ç—å issue](https://github.com/your-repo/issues)
- **Email**: admin@antispam-bot.com
- **Telegram**: @your_support

## üìù Changelog

### v1.0.0
- ‚úÖ Docker —É—Å—Ç–∞–Ω–æ–≤–∫–∞
- ‚úÖ systemd —É—Å—Ç–∞–Ω–æ–≤–∫–∞
- ‚úÖ Let's Encrypt –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- ‚úÖ –°–∫—Ä–∏–ø—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
